---
layout : post
categories : network
title : 네트워크층 개요
tags : [network]
date-string : April 02, 2024
---

# 네트워크층

## 개요
- 블랙 박스로서의 인터넷
  - 개념적인 수준에서 , 전체 인터넷은 수백만의 컴퓨터를 연결하는 블랙박스 네트워크

- LAN과 WAN이 서로 연결된 인터넷
  - 연결장치를 통하여 연결된 수많은 네트워크로 구성
  - LAN과 WAN들의 네트워크들이 서로 연결된 네트워크

## 교환
- 메시지를 발신지에서 목적지로 전달하는 과정에는 많은 결정들이 이루어짐
- 메시지가 연결 장치에 도착하면 패킷을 송신하는 출력 포트를 결정
- 연결 장치는 한 포트를 다른 포트에 연결하는 교환기 역할
- 교환의 종류
  - 회선 교환
  - 패킷 교환

### 회선 교환
- 메시지 전달 전에 발신지와 목적지 사이에 물리회선(링크) 생성 후 메시지 전달
- 메시지 전달 완료 후 네트워크에 통보
- 다른 연결을 위해 연결해제
- 전체 메시지는 패킷으로 분할되지 않고 발신지에서 목적지로 전달

### 패킷 교환
- 오늘날 인터넷의 네트워크 계층 : 패킷 교환망
- 상위층으로부터 받은 메시지 패킷 단위로 분할
- 발신지에서 목적지까지 패킷 단위로 전달
- 패킷 교환망은 패킷을 최종 목적지까지 전달 결정
- 메시지는 관리 가능한 크기의 패킷으로 분할된 후 송신되고 목적지에서 다시 조립됨
- 사용방법
  - 데이터그램
  - 가상회선

## 네트워크층에서 패킷 교환
- 네트워크층은 패킷 교환망으로 설계
- 발신지에서 메시지는 데이터그램 단위로 분할
- 각 데이터그램이 발신지에서 목적지로 전달
- 수신된 데이터그램은 목적지에서 원래의 메시지로 재조립
- 제공되는 서비스
  - 비연결형 서비스
  - 연결형 서비스

### 비연결형 서비스
- 각 패킷을 상호 독립적으로 처리
- 네트워크내의 교환기를 라우터라고 함
- 비연결형 네트워크에서 라우터의 전달 과정
  - 라우터는 목적지 주소를 기반으로 패킷을 전달
  - SA|DA|Data -> 라우팅 테이블 -> SA|DA|Data
  -                 DA|output interface
                    A | 1 
                    B | 2
                   ...|...
                    H | 3
    (SA = Source Address / DA = Destination Address)


### 연결형 서비스
- 서비스 제공을 위해 연결설정, 데이터 전송, 연결해제 과정 사용
- 메시지에 속한 모든 패킷 간에 서로 관계성을 가짐
- 데이터그램 송신 전에 경로를 지정하는 가상회선 생성
- 연결 생성 후 경로를 따라 데이터그램 전달
- 패킷에는 가상 회선 식별자(흐름 레이블:flow label)가 있어야 함
- 각 패킷은 레이블을 기반으로 포워딩
- 레이블값을 기반으로 포워딩 결정

#### 연결형 서비스 생성 단계
- 연결설정 단계
  - 가상회선을 위한 엔트리 생성
  - 요청패킷 : 발신자와 목적지 주소 전달
  - 확인응답 패킷 : 테이블 내의 엔트리 완성
- 데이터 전송 과정
  - 엔트리를 기반으로 순서대로 전달
- 연결 해제
  - 발신지는 패킷을 모두 보낸 후 연결해제 패킷 송신
  - 목적지는 확인응답 패킷으로 응답
  - 모든 라우터는 해당 엔트리 
  
## 네트워크층 서비스
### 네트워크층 서비스의 예
- 오늘날 인터넷에서 사용되는 비연결형 서비스 기반

### 논리 주소 체계
- 네트워크층은 종단-대-종단 통신을 제공
- 논리주소라는 인터넷 공통 식별자 시스템이 필요
- 통신을 위해 네트워크층 주소가 필요

### 발신지 컴퓨터에서 제공되는 서비스
- 패킷화
  - 상위층으로부터 온 데이터를 데이터그램으로 캡슐화
- 다음 홉의 논리 주소 찾기
  - 라우팅 테이블을 참조
- 다음 홉의 물리 주소(MAC) 찾기
  - ARP(address resolution protocol) 이용
- 데이터그램 단편화
  - 데이터그램이 MTU(maximum transmission unit)보다 클 경우

### 각 라우터에서 제공되는 서비스
- 두개(입력, 출력)의 인터페이스가 관여
- 다음 홉의 논리주소 찾기
- 다음 홉의 MAC주소 찾기
- 단편화

### 목적지 컴퓨터에서 제공되는 서비스
- 단편들을 재조립(유효성 검사)
- 상위층에 전달
- 재조립 타이머 설정, 완료 전에 타이머가 만료되면 재전송 오류 메시지 전송