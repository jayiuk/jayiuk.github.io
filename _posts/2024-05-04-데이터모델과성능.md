---
published : true
layout : post
categories : DB, sql
title : 데이터 모델과 성능
tags : [DB, sql]
date-string : May 04, 2024
---

# 데이터 모델과 성능
## 성능 데이터 모델링 개요
### 성능 데이터 모델링
- 목적 : 데이터베이스의 성능 향상
- 데이터 모델 설계 시점부터 정규화, 반덩규화, 테이블 통합, 테이블 분할, 조인 구조, PK, FK 등 여러가지 성능과 관련된 사항들이 데이터 모델링 작업에 반영될 수 있도록 하는 것

### 성능 데이터 모델링 수행 시점
- 분석/설계 단계부터
  - 성능 저하에 따른 비용 최소화 가능

### 성능 데이터 모델링 고려사항
- 데이터 모델링 시 정규화 작업을 수행
- 데이터베이스의 용량을 산정
- 데이터베이스에 발생되는 트랜잭션의 유형 파악
- 데이터베이스 용량 및 트랜잭션의 유형에 따라 반정규화 수행
- 이력 데이터 모델의 조정, PK.FK 조정, 슈퍼/서브 타입 변환 조정 등을 수행
- 성능 관점에서 데이터 모델 검증

#### 데이터 모델링 시 정규화를 완벽하게 수행해야함
- 정규화된 모델은 주요 관심사별로 데이터를 분산시키는 효과
  - 그 자체로도 성능 향상

## 정규화와 성능
### 정규화를 통한 성능 향상 전략
- 정규화를 수행 -> 결정자에 의해 함수적 종속을 가지고 있는 일반 속성을 의존자로 하여 입력/수정/삭제 이상현상을 제거
- 정규화 작업
  - 데이터의 중복 속성 제거
  - 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약
    - 한 테이블의 데이터 용량 최소화

### 정규화 용어

|용어|설명|
|-------------|----------------------------------------------------|
|정규화|관계형 데이터베이스 테이블의 삽입/삭제/갱신 이상현상 발생을 최소화하기 위해 좀 더 작은 단위의 테이블로 설계하는 과정|
|정규형|정규화한 결과|
|함수적 종속|테이블의 특정 칼럼 A의 값을 알면 다른 칼럼 B값을 알 수 있을 때 칼럼 B는 칼럼 A에 함수적 종속성이 있다고 함|
|결정자|위의 설명에서 A를 결정자|
|다치종속|결정자 칼럼에 의해 칼럼 B의 값을 다수 개 알 수 있을 때 칼럼 B는 A에 다치종속되었다고 함|

### 정규화 효과 및 장점
- 상호 종속성이 강한 데이터 요소들을 분리, 독립된 개념으로 정의
  - 높은 응집도 & 낮은 결합도 원칙에 충실
    - 유연성 극대화
- 정규화를 통해 개념이 좀 더 세분화됨
  - 해당 개념에 대한 재활용 가능서 ㅇ증가
- 중복 최소화
  - 데이터 품질 확보
  - 저장공간 절약
  - DML 처리 시 성능 향상

### 정규화 이론
- 1, 2, 3, 보이스-코드 정규화는 함수 종속성에 근거하여 정규화 수행
- 4차 정규화는 다치종속에 근거하여 정규화 수행
- 5차 정규화는 조인에 의해 발생하는 이상현상제거로 정규화수행

|정규화 유형|설명|
|----------|--------------------------------------------|
|1차 정규화|한 속성에 여러 개의 속성값을 갖거나 같은 유형의 속성이 여러개인 경우 해당 속성을 분리시킨다 <br> 1차 정규화 작업으로 속성의 원자성 확보|
|2차 정규화|주식별자에 완전 함수 종속되지 않은 속성을 분리 <br> 2차 정규화 작업으로 부분 종속 속성이 된 속성을 분리|
|3차 정규화|일반 속성끼리 함수 종속이 발생한 속성을 분리 <br> 3차 정규화 작업으로 이행적 종속 속성을 분리|
|보이스-코드 정규화|결정자 안에 함수 종속을 가진 주식별자 속성을 분리|
|4차 정규화|다가 종속 속성을 별도의 엔터티로 분리|
|5차 정규화|결합 종속일 경우는 2개 이상의 엔터티로 분리|

- 일반적으로 3차 정규화까지 진행

### 제1정규형
- 한 속성에 여러 개의 속성값을 갖거나 같은 유형의 속성이 여러 개인 겨우 해당 속성을 분리시켜야 함

### 제2정규형
- 제1정규형을 만족하고 모든 PK가 아닌 칼럼은 OK전체에 종속되어야 함
- PK에 종속적이지 않거나 PK중 일부 칼럼들에만 종속적인 칼럼은 분리되어야함

### 제3정규형
- 제2정규형을 만족하고 일반 속성들 간에도 함수 종속 관계가 존재하지 않아야 함
- 일반 속성들 간 종속 관계가 존재하는 것들은 분리되어야함

### 정규화와 성능
- 전에 없었던 조인이 발생하게 되더라도 효율적인 인덱스 사용을 통해 조인 연산을 수행하면 성능상읜 단점은 거의 없음
- 적은 용량의 테이블이 생성된다면 조인 연산 시 적은 용량의 테이블을 먼저 읽어 조인을 수행하면 됨 -> 성능 상 유리
- 정규화가 제대로 되지 않으면 비슷한 종류의 속성이 여러 개가 되어 과도하게 많은 인덱스가 만들어질 수 있다.

